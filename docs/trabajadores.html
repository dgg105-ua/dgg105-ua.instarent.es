<!DOCTYPE html>
<html lang="es" class="no-js">
<head>
  <!-- Mobile Specific Meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Favicon-->
  <link rel="shortcut icon" href="img/fav.png">
  <!-- Author Meta -->
  <meta name="author" content="CodePixar">
  <!-- Meta Description -->
  <meta name="description" content="">
  <!-- Meta Keyword -->
  <meta name="keywords" content="">
  <!-- meta character set -->
  <meta charset="UTF-8">
  <!-- Site Title -->
  <title>Trabajadores - InstaRent</title>
  <!--
    CSS
    =============================================
  -->
  <link rel="stylesheet" href="css/linearicons.css">
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link rel="stylesheet" href="css/themify-icons.css">
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/owl.carousel.css">
  <link rel="stylesheet" href="css/nice-select.css">
  <link rel="stylesheet" href="css/nouislider.min.css">
  <link rel="stylesheet" href="css/ion.rangeSlider.css" />
  <link rel="stylesheet" href="css/ion.rangeSlider.skinFlat.css" />
  <link rel="stylesheet" href="css/magnific-popup.css">
  <link rel="stylesheet" href="css/main.css">

  <!-- Tu JavaScript (para el modal, etc.) si lo necesitas -->
  <!-- <script src="js/trabajadores.js" defer></script> -->
</head>
<body>
  <!-- Start Header Area -->
  <div id="header-placeholder"></div> 
  <!-- End Header Area -->

  <!-- Start Banner Area -->
  <section class="banner-area organic-breadcrumb">
    <div class="container">
      <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
        <div class="col-first">
          <h1>Trabajadores</h1>
          <h2 class="text-white">Profesionales de confianza</h2>
        </div>
      </div>
    </div>
  </section>
  <!-- End Banner Area -->

  <div class="container">
    <div class="row">
      <!-- Barra lateral para los filtros -->
      <div class="col-xl-3 col-lg-4 col-md-5">
        <div class="sidebar-filter mt-50">
          <div class="top-filter-head">Filtros de Trabajadores</div>

          <!-- Filtro Categoría -->
          <div class="common-filter mt-4">
            <div class="head">Categoría</div>
            <form action="#">
              <select id="categoria" class="nice-select w-100 mt-2">
                <option value="">Todas</option>
                <option value="limpieza">Limpieza</option>
                <option value="mantenimiento">Mantenimiento</option>
                <option value="seguridad">Seguridad</option>
              </select>
            </form>
          </div>

          <!-- Filtro Experiencia (años) -->
          <div class="common-filter mt-4">
            <div class="head">Experiencia (años)</div>
            <div class="mt-2">
              <input type="range" id="experiencia" name="experiencia" min="0" max="20" value="5" class="w-100">
              <!-- Podrías añadir un output dinámico si deseas mostrar el valor actual -->
            </div>
          </div>

          <!-- Filtro Valoración Mínima -->
          <div class="common-filter mt-4">
            <div class="head">Valoración mínima</div>
            <form action="#">
              <select id="valoracion" class="nice-select w-100 mt-2">
                <option value="">Cualquiera</option>
                <option value="1">1 estrella</option>
                <option value="2">2 estrellas</option>
                <option value="3">3 estrellas</option>
                <option value="4">4 estrellas</option>
                <option value="5">5 estrellas</option>
              </select>
            </form>
          </div>

          <!-- Botones Filtrar / Quitar Filtros -->
          <div class="filter-actions">
			<button class="primary-btn filter-btn">Filtrar</button>
			<button class="primary-btn filter-btn" style="background: #ccc; color: #333;">Quitar Filtros</button>
		  </div>
        </div>
      </div>

    <!-- Listado de trabajadores -->
    <div class="col-xl-9 col-lg-8 col-md-7">
      <section class="lattest-product-area pb-40 category-list">
        <div class="row">
          
        </div>
      </section>
    </div>


        <!-- Paginación (opcional) -->
        <div class="center" style="display: flex; justify-content: center;">
          <div class="pagination">
            <a href="#" class="prev-arrow">
              <i class="fa fa-long-arrow-left" aria-hidden="true"></i>
            </a>
            <a href="#" class="active">1</a>
            <a href="#">2</a>
            <a href="#">3</a>
            <a href="#" class="dot-dot">
              <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
            </a>
            <a href="#">6</a>
            <a href="#" class="next-arrow">
              <i class="fa fa-long-arrow-right" aria-hidden="true"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: Chat con el trabajador -->
  <div id="modal" class="modal" style="display: none;">
    <div class="modal-content" style="padding: 20px; position: relative;">
      <!-- Botón para cerrar el modal -->
      <span class="close" id="closeModal" style="position:absolute; top:10px; right:15px; cursor:pointer;">
        &times;
      </span>

      <!-- Título dinámico con el nombre del trabajador -->
      <h2 id="modalTitle">Chat con el trabajador</h2>

      <!-- Simulación de chat -->
      <div class="chat-box" style="border:1px solid #ccc; margin-top:15px; padding:10px; max-height: 200px; overflow:auto;">
        <div class="chat-bubble user" style="margin-bottom:10px; background:#f2f2f2; padding:5px 10px; border-radius:5px;">
          Hola, estoy interesado en tus servicios
        </div>
        <div class="chat-bubble worker" style="margin-bottom:10px; background:#d9edf7; padding:5px 10px; border-radius:5px;">
          Hola, claro. ¿Qué necesitas exactamente?
        </div>
        <!-- Más mensajes ficticios... -->
      </div>

      <!-- Número de teléfono borroso -->
      <div class="phone-info mt-3">
        <p>Número de teléfono:
          <span class="blurred" id="phoneNumber" style="filter: blur(4px);">666 123 456</span>
        </p>
      </div>

      <!-- Botón Contratar -->
      <button id="contratarBtn" class="primary-btn mt-2">
        Contratar
      </button>
    </div>
  </div>

  <!-- start footer Area -->
  <footer class="footer-area section_gap">
    <div class="container">
      <!-- Aquí mantenemos el footer existente, pero añadimos los enlaces solicitados -->
      <div class="row">
        <div class="col-lg-3  col-md-6 col-sm-6">
          <div class="single-footer-widget">
            <h6>Sobre Nosotros</h6>
            <p>
                En InstaRent, queremos que encontrar tu próxima vivienda sea rápido, sencillo y seguro.
                ¡Bienvenido a la manera más fácil de alquilar!
            </p>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 col-sm-6 ml-auto">
          <div class="single-footer-widget">
            <h6>Síguenos</h6>
            <p>Seamos sociales</p>
            <div class="footer-social d-flex align-items-center">
              <a href="#"><i class="fa fa-facebook"></i></a>
              <a href="#"><i class="fa fa-twitter"></i></a>
              <a href="#"><i class="fa fa-dribbble"></i></a>
              <a href="#"><i class="fa fa-behance"></i></a>
            </div>
          </div>
        </div>        
      </div>

      <!-- Cambio 3: Añadir Condiciones de uso, Política de privacidad, etc. -->
      <div class="footer-bottom d-flex justify-content-center align-items-center flex-wrap">
        <p class="footer-text m-0">
          <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
          <!-- Tu texto base existente -->
          <span>© 2025 InstaRent</span> |
          <a href="condiciones_uso.html">Condiciones de Uso</a> |
          <a href="politica_privacidad.html">Política de Privacidad</a> |
          <a href="politica_cookies.html">Política de Cookies</a> |
          <a href="politica_copyright.html">Política de Copyright</a>
        </p>
      </div>
    </div>
  </footer>
  <!-- End footer Area -->

  <!-- Scripts (igual que en index.html) -->
  <script src="js/vendor/jquery-2.2.4.min.js"></script>
  <script 
    src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
    integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
    crossorigin="anonymous">
  </script>
  <script src="js/vendor/bootstrap.min.js"></script>
  <script src="js/jquery.ajaxchimp.min.js"></script>
  <script src="js/jquery.nice-select.min.js"></script>
  <script src="js/jquery.sticky.js"></script>
  <script src="js/nouislider.min.js"></script>
  <script src="js/countdown.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <!--gmaps Js-->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
  <script src="js/gmaps.min.js"></script>
  <script src="js/main.js"></script>

  <!-- Script para manejar el modal de chat con el trabajador -->
  <script>
    const modal = document.getElementById("modal");
    const closeModal = document.getElementById("closeModal");
    const modalTitle = document.getElementById("modalTitle");

    function abrirModal(nombreTrabajador) {
      modalTitle.textContent = "Chat con " + nombreTrabajador;
      modal.style.display = "block";
    }

    closeModal.onclick = function() {
      modal.style.display = "none";
    }

    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
  </script>
  <script src="scripts/header_loader.js"></script>
<<<<<<< HEAD
  <script>
  async function cargarTrabajadores(categoriaSeleccionada = "") {
    const contenedor = document.querySelector(".lattest-product-area .row");
    contenedor.innerHTML = '<div class="col-12 text-center"><p>Cargando trabajadores...</p></div>';

    try {
      // Enviar la categoría seleccionada como parámetro al servidor
      const response = await fetch(`https://instarent-backend.onrender.com/api/trabajadores?categoria=${categoriaSeleccionada}`);
      if (!response.ok) throw new Error("Error al obtener los trabajadores.");
      const trabajadores = await response.json();

      contenedor.innerHTML = "";
      
      if (trabajadores.length === 0) {
        contenedor.innerHTML = '<div class="col-12 text-center"><p>No se encontraron trabajadores para esta categoría.</p></div>';
        return;
      }

      trabajadores.forEach(trabajador => {
        const imagenes = {
          "11111111T": "img/trabajadores/trabajador_1.jpg",
          "22222222T": "img/trabajadores/trabajador_2.jpg",
          "33333333T": "img/trabajadores/trabajador_3.jpg",
          "44444444T": "img/trabajadores/trabajador_4.jpg",
          "55555555T": "img/trabajadores/trabajador_5.jpg",
          "66666666T": "img/trabajadores/trabajador_6.jpg"
        };
        const imagen = imagenes[trabajador.dni_trabajador] || "img/trabajadores/default.jpg";

        const trabajadorHTML = `
          <div class="col-md-4 col-sm-6 mb-4">
            <div class="single-product p-3 border rounded">
              <img src="${imagen}" alt="Trabajador" class="img-fluid mb-3" style="height: 250px; object-fit: cover; width: 100%;">
              <h6>${trabajador.nombre}</h6>
              <p class="mb-1">${trabajador.tipo}</p>
              <p>${trabajador.precio} €/hora</p>
              <button class="primary-btn mt-2" onclick="abrirModal('${trabajador.nombre}'); event.stopPropagation();">
                Chat / Contratar
              </button>
            </div>
          </div>
        `;
        contenedor.innerHTML += trabajadorHTML;
      });
    } catch (error) {
      console.error("Error al cargar los trabajadores:", error);
      contenedor.innerHTML = '<div class="col-12 text-center"><p>Error al cargar los trabajadores. Inténtalo más tarde.</p></div>';
    }
  }

  async function cargarCategorias() {
    try {
      const response = await fetch('http://localhost:3000/api/categorias');
      if (!response.ok) throw new Error("Error al obtener categorías.");
      const categorias = await response.json();

      const selectCategoria = document.getElementById("categoria");
      if (!selectCategoria) {
        console.error("No se encontró el elemento select con ID 'categoria'.");
        return;
      }

      // Limpiar el contenido del select antes de añadir las opciones
      selectCategoria.innerHTML = '<option value="">Todas</option>';

      // Añadir las categorías obtenidas
      categorias.forEach(categoria => {
        const option = document.createElement("option");
        option.value = categoria;
        option.textContent = categoria.charAt(0).toUpperCase() + categoria.slice(1);
        selectCategoria.appendChild(option);
      });

      // Reinicializar nice-select para reflejar los cambios
      $('.nice-select').niceSelect('update');
    } catch (error) {
      console.error("Error al cargar categorías:", error);
    }
  }

  document.addEventListener("DOMContentLoaded", function() {
    cargarCategorias();
    cargarTrabajadores();
  });

    // Escuchar cambios en el filtro de categoría
  document.getElementById("categoria").addEventListener("change", cargarTrabajadores);

  // Escuchar el botón de filtrar
  document.querySelector(".filter-btn").addEventListener("click", () => {
    const categoriaSeleccionada = document.getElementById("categoria").value;
    cargarTrabajadores(categoriaSeleccionada);
  });
</script>
=======
>>>>>>> 8acfa92a944d89c998894406c0b9c61e27861460
</body>
</html>